(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{219:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return oa}));var r=n(0),i=n(8),c=n.n(i),a=n(74),s=n(327),o=n(321),l=n(7),u=n.n(l),d=n(68),f=n.n(d),j=f.a.create({baseURL:"https://app-devis-test.herokuapp.com/",withCredentials:!0}),b=n(34),p=function(e){return b.default.alert("Une erreur est survenue","Une erreur de type "+e+", l'action a \xe9t\xe9 annul\xe9e",[{text:"Ok",onPress:function(){},style:"cancel"}])},x=n(1),h=Object(r.createContext)(null),O=h.Provider,g=function(e){var t=e.children,n=Object(r.useState)({accessToken:null,refreshToken:null,authenticated:null}),i=u()(n,2),a=i[0],s=i[1];return Object(x.jsx)(O,{value:{authState:a,setAuthState:s,logout:function(){return c.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.a.awrap(j.post("/signout"));case 3:200===e.sent.status&&s({accessToken:null,refreshToken:null,authenticated:!1}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),p(e.t0);case 10:case"end":return e.stop()}}),null,null,[[0,7]],Promise)},getAccessToken:function(){return a.accessToken}},children:t})},m=Object(r.createContext)(),w=m.Provider,y=function(e){var t=e.children,n=Object(r.useState)({id:null,firstName:null,lastName:null,mail:null,role_id:null}),i=u()(n,2),c=i[0],a=i[1];return Object(x.jsx)(w,{value:{user:c,setUser:a},children:t})},v=n(10),T=n.n(v),k=n(161),C=n.n(k),S=n(86);function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){T()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var z,V,A,N,L,F,I,D,R,_,B,M,U,H,J=Object(r.createContext)(),W=J.Provider,K=function(e){var t=e.children,n=Object(r.useContext)(h),i=f.a.create({baseURL:"http://192.168.1.10:5001"}),a=f.a.create({baseURL:"http://192.168.1.10:5001"});i.interceptors.request.use((function(e){return e.headers.Authorization||(e.headers.Authorization="Bearer "+n.getAccessToken()),e}),(function(e){return Promise.reject(e)}));return C()(i,(function(e){var t={method:"POST",data:{refreshToken:n.authState.refreshToken},url:"http://192.168.1.10:5001/refresh-token"};return f()(t).then((function(t){return c.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e.response.config.headers.Authorization="Bearer "+t.data.accessToken,n.setAuthState(E(E({},n.authState),{},{accessToken:t.data.accessToken})),r.next=4,c.a.awrap(S.default.setItem("@storage_Key",JSON.stringify({accessToken:t.data.accessToken,refreshToken:n.authState.refreshToken})));case 4:return r.abrupt("return",Promise.resolve());case 5:case"end":return r.stop()}}),null,null,null,Promise)})).catch((function(e){return n.setAuthState({accessToken:null,refreshToken:null})}))}),{}),Object(x.jsx)(W,{value:a,children:t})},q=n(4),G=n(15),Q=n(73),X=n(64),Y=n(6),Z=n(51),$=Y.default.create({main:{flex:1,backgroundColor:"#EEEFF5"},header:{padding:30},title:{fontSize:30,textAlign:"center",marginVertical:50},textInput:{fontSize:18,marginBottom:10,fontWeight:"600"},input:{padding:10,fontSize:20,borderWidth:2,borderColor:"black",backgroundColor:"white",borderRadius:10},mdpInput:{marginTop:20},inputContainer:{paddingHorizontal:30},resetPass:{textAlign:"center",marginVertical:10,fontWeight:"700"},button:{marginTop:30,backgroundColor:"#083D77",borderRadius:50},buttonContainer:{paddingHorizontal:80},textButton:{fontSize:20,color:"white",padding:20,textAlign:"center",fontWeight:"600"},errorText:{color:"red",textAlign:"center"}}),ee=function(e){var t=e.navigation,n=Object(r.useState)(""),i=u()(n,2),s=i[0],o=i[1],l=Object(r.useState)(""),d=u()(l,2),f=d[0],j=d[1],b=Object(r.useState)([]),O=u()(b,2),g=O[0],w=O[1],y=Object(r.useContext)(h).setAuthState,v=Object(r.useContext)(m),T=(v.user,v.setUser,Object(r.useContext)(J).publicAxios);return Object(x.jsxs)(Q.default,{style:$.main,children:[Object(x.jsx)(a.default,{barStyle:"dark-content"}),Object(x.jsx)(q.default,{style:$.header,children:Object(x.jsx)(G.default,{style:$.title,children:"Bonjour, Bienvenue sur l\u2019application devis de Webgo"})}),Object(x.jsxs)(q.default,{style:$.inputContainer,children:[Object(x.jsx)(G.default,{style:$.textInput,children:"Adresse mail"}),Object(x.jsx)(X.default,{onChangeText:o,value:s,autoCapitalize:"none",clearButtonMode:"while-editing",style:$.input,textContentType:"emailAddress",keyboardType:"email-address"}),g.length>0&&g.some((function(e){return 2===e.errorCode}))?Object(x.jsx)(G.default,{style:$.errorText,children:g.filter((function(e){return 2===e.errorCode}))[0].message}):null]}),Object(x.jsxs)(q.default,{style:[$.inputContainer,$.mdpInput],children:[Object(x.jsx)(G.default,{style:$.textInput,children:"Mot de passe"}),Object(x.jsx)(X.default,{onChangeText:j,value:f,textContentType:"password",secureTextEntry:!0,clearButtonMode:"while-editing",style:[$.input,$.inputBottom]}),g.length>0&&g.some((function(e){return 3===e.errorCode}))?Object(x.jsx)(G.default,{style:$.errorText,children:g.filter((function(e){return 3===e.errorCode}))[0].message}):null]}),Object(x.jsx)(Z.default,{onPress:function(){return t.navigate("Reset Password")},children:Object(x.jsx)(G.default,{style:$.resetPass,children:"Mot de passe oubli\xe9 ?"})}),Object(x.jsxs)(q.default,{style:$.buttonContainer,children:[Object(x.jsx)(Z.default,{style:$.button,onPress:function(){var e,t,n,r;return c.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,s||w(g.concat({errorCode:2,message:"Merci de rentrer une adresse mail"})),f||w(g.concat({errorCode:3,message:"Merci de rentrer un mot de passe"})),i.next=5,c.a.awrap(T.post("/signin",{mail:s,password:f}));case 5:return(e=i.sent)||p("Une erreur est survenue durant la connexion, merci de r\xe9essayer"),t=e.data,n=t.accessToken,r=t.refreshToken,i.next=10,c.a.awrap(S.default.setItem("@storage_Key",JSON.stringify({accessToken:n,refreshToken:r})));case 10:i.next=15;break;case 12:i.prev=12,i.t0=i.catch(0),y({authenticated:!1});case 15:case"end":return i.stop()}}),null,null,[[0,12]],Promise)},children:Object(x.jsx)(G.default,{style:$.textButton,children:"Connexion"})}),g.length>0&&g.some((function(e){return 2!==e.errorCode&&3!==e.errorCode}))?Object(x.jsx)(G.default,{style:$.errorText,children:g[0].message}):null]})]})},te=Y.default.create({main:{flex:1,justifyContent:"center",backgroundColor:"#EEEFF5"},textInput:{marginBottom:10,fontSize:18},input:{borderColor:"black",borderWidth:2,marginBottom:10,fontSize:30,padding:5,backgroundColor:"white",borderRadius:10},inputContainer:{paddingHorizontal:30},button:{backgroundColor:"#083D77",padding:20,borderRadius:50,marginTop:20},buttonText:{fontSize:20,color:"white",textAlign:"center"},buttonContaier:{paddingHorizontal:60},textValidation:{textAlign:"center",marginTop:20,padding:10,color:"green"}}),ne=function(){var e=Object(r.useState)(""),t=u()(e,2),n=t[0],i=t[1],c=Object(r.useState)(!1),a=u()(c,2),s=a[0],o=a[1];return Object(x.jsxs)(Q.default,{style:te.main,children:[Object(x.jsxs)(q.default,{style:te.inputContainer,children:[Object(x.jsx)(G.default,{style:te.textInput,children:"Rentrez votre mail ici : "}),Object(x.jsx)(X.default,{value:n,style:te.input,onChangeText:i,textContentType:"emailAddress"})]}),Object(x.jsx)(q.default,{style:te.buttonContaier,children:Object(x.jsx)(Z.default,{onPress:function(){return o(!0)},children:Object(x.jsx)(q.default,{style:te.button,children:Object(x.jsx)(G.default,{style:te.buttonText,children:"Envoyer"})})})}),s?Object(x.jsx)(G.default,{style:te.textValidation,children:"Un lien pour r\xe9initialiser votre mot de passe vous a \xe9t\xe9 envoy\xe9"}):null]})},re=Object(o.default)(),ie=function(){return Object(x.jsxs)(re.Navigator,{screenOptions:{headerShown:!1,headerStyle:{backgroundColor:"#083D77"},headerTintColor:"#EFEFEF"},children:[Object(x.jsx)(re.Screen,{name:"Login",component:ee}),Object(x.jsx)(re.Screen,{name:"Reset Password",component:ne,options:{headerShown:!0}})]})},ce=n(3),ae=n.n(ce),se=n(2),oe=n(102),le=n(62),ue=se.default.TouchableOpacity(z||(z=ae()(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  flex-direction: row;\n  border: 1px solid rgba(31, 19, 0, 0.3);\n  padding: 10px 20px;\n  background: #fdfdff;\n"]))),de=se.default.Text(V||(V=ae()(["\n  font-size: 20px;\n  font-weight: 500;\n  color: rgba(31, 19, 0, 0.6);\n"]))),fe=function(e){var t=e.text,n=e.action;return Object(x.jsxs)(ue,{onPress:n,children:[Object(x.jsx)(de,{children:t}),Object(x.jsx)(le.default,{name:"plus",size:25,color:"rgba(31, 19, 0, 0.6)"})]})},je=se.default.View(A||(A=ae()(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n"]))),be=se.default.TouchableOpacity(N||(N=ae()(["\n  border: 1px solid #ff4d42;\n  width: 49%;\n  padding: 2%;\n  border-radius: 5px;\n"]))),pe=se.default.Text(L||(L=ae()(["\n  font-size: 18px;\n  text-align: center;\n  color: #ff4d42;\n  font-weight: 500;\n"]))),xe=se.default.TouchableOpacity(F||(F=ae()(["\n  border: ","\n  width: 49%;\n  padding: 2%;\n  border-radius: 5px;\n"])),(function(e){return e.isClickable?"1px solid #083d77":"1px solid rgba(31, 19, 0, 0.3)"})),he=se.default.Text(I||(I=ae()(["\n  font-size: 18px;\n  text-align: center;\n  color: ","\n  font-weight: 500;\n"])),(function(e){return e.isClickable?"#083d77":"rgba(31, 19, 0, 0.3)"})),Oe=function(e){var t=e.textLeft,n=e.textRight,r=e.actionLeft,i=e.actionRight,c=e.righIsClickable;return Object(x.jsxs)(je,{children:[Object(x.jsx)(be,{onPress:r,children:Object(x.jsx)(pe,{children:t})}),Object(x.jsx)(xe,{onPress:i,isClickable:c,activeOpacity:c?.2:1,children:Object(x.jsx)(he,{isClickable:c,children:n})})]})},ge=n(223);function me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function we(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?me(Object(n),!0).forEach((function(t){T()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ye,ve,Te,ke,Ce,Se,Pe,Ee,ze,Ve,Ae,Ne,Le,Fe,Ie,De,Re,_e,Be,Me,Ue,He,Je,We,Ke=se.default.View(D||(D=ae()(["\n  background: #fdfdff;\n  border: 1px solid rgba(31, 19, 0, 0.3);\n  padding: 10px 20px;\n  margin: 1% 0;\n"]))),qe=se.default.TouchableOpacity(R||(R=ae()(["\n  align-self: flex-end;\n"]))),Ge=se.default.TextInput(_||(_=ae()(["\n  margin: 2% 0;\n  font-size: 15px;\n  border: 1px solid #1f1300;\n  padding: 2% 5%;\n  font-weight: 600;\n  border-radius: 5px;\n"]))),Qe=se.default.TextInput(B||(B=ae()(["\n  font-size: 15px;\n  border: 1px solid #1f1300;\n  border-radius: 5px;\n  padding: 2% 5%;\n"]))),Xe=se.default.Text(M||(M=ae()(["\n  margin-bottom: 5px;\n  font-weight: 600;\n  font-size: 15px;\n"]))),Ye=se.default.View(U||(U=ae()([""]))),Ze=se.default.View(H||(H=ae()(["\n  margin: 2% 0;\n"]))),$e=function(e){var t=e.option,n=e.setOptionList,i=e.optionList,c=e.setAddButtonIsPressed,a=e.packId,s=Object(r.useContext)(m).user,o=Object(r.useState)({content:t?t.content:null,price_ht:t?t.price_ht:null,price_ttc:t?t.price_ttc:null,user_id:s.id,pack_id:a}),l=u()(o,2),d=l[0],f=l[1];return Object(x.jsxs)(Ke,{children:[Object(x.jsx)(qe,{onPress:function(){t?j.delete("/api/options/"+t.id).then((function(e){return e.data})).then((function(e){return n(i.filter((function(t){return t.id!==e.id})))})):c(!1)},children:Object(x.jsx)(ge.default,{name:"cross",size:30,color:"rgba(31, 19, 0, 0.3)"})}),Object(x.jsx)(Xe,{children:"Nom de l'option"}),Object(x.jsx)(Ge,{placeholder:"Nom de l'option",onChangeText:function(e){return f(we(we({},d),{},{content:e}))},value:d.content}),Object(x.jsxs)(Ye,{children:[t&&Object(x.jsxs)(Ze,{children:[Object(x.jsx)(Xe,{children:"Prix TTC"}),Object(x.jsx)(Qe,{placeholder:"Prix TTC de l'option",value:d.price_ttc})]}),Object(x.jsxs)(Ze,{children:[Object(x.jsx)(Xe,{children:"Prix HT"}),Object(x.jsx)(Qe,{placeholder:"Prix HT de l'option",onChangeText:function(e){return f(we(we({},d),{},{price_ht:e}))},value:d.price_ht})]}),Object(x.jsx)(Oe,{textLeft:"Annuler",textRight:t?"Modifier":"Cr\xe9er",actionLeft:function(){return c(!1)},actionRight:function(){return t?void j.put("/api/options/"+t.id,{content:d.content,price_ht:parseFloat(d.price_ht),user_id:s.id}).then((function(e){return e.data})).then((function(e){return f(we(we({},d),e))})):void(d.content?d.price_ht?j.post("/api/options",{pack_id:d.pack_id,price_ht:parseFloat(d.price_ht),content:d.content,user_id:d.user_id}).then((function(e){n(i.concat(e.data)),c(!1)})).catch((function(e){return console.error(e)})):p("Merci de rentrer un prix"):p("Merci de rentrer un nom d'option"))},righIsClickable:!0})]})]})},et=se.default.View(ye||(ye=ae()([""]))),tt=se.default.Text(ve||(ve=ae()(["\n  text-align: center;\n  font-size: 18px;\n"]))),nt=se.default.View(Te||(Te=ae()([""]))),rt=function(e){var t=e.pack,n=Object(r.useState)([]),i=u()(n,2),c=i[0],a=i[1],s=Object(r.useState)(!1),o=u()(s,2),l=o[0],d=o[1];return Object(r.useEffect)((function(){j.get("/api/packs/"+t.id).then((function(e){return e.data})).then((function(e){return a(e.option)})).catch((function(e){return p(e)}))}),[]),Object(x.jsxs)(et,{children:[Object(x.jsx)(tt,{children:"Liste des options"}),Object(x.jsx)(nt,{children:c&&c.map((function(e){return Object(x.jsx)($e,{option:e,packId:t.id,optionList:c,setOptionList:a,setAddButtonIsPressed:d},e.id)}))}),l?Object(x.jsx)($e,{setAddButtonIsPressed:d,optionList:c,packId:t.id,setOptionList:a}):Object(x.jsx)(fe,{text:"Ajouter une option",action:function(){return d(!0)}})]})},it=se.default.View(ke||(ke=ae()(["\n  background: #fdfdff;\n  border: 1px solid #1f1300;\n  padding: 10px 20px;\n  margin: 1% 0;\n"]))),ct=se.default.View(Ce||(Ce=ae()(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n"]))),at=se.default.TouchableOpacity(Se||(Se=ae()(["\n  display: flex;\n  flex-direction: row;\n"]))),st=se.default.TouchableOpacity(Pe||(Pe=ae()([""]))),ot=se.default.Text(Ee||(Ee=ae()(["\n  font-size: 20px;\n"]))),lt=se.default.View(ze||(ze=ae()([""]))),ut=function(e){var t=e.pack,n=e.setList,i=e.list,c=Object(r.useState)(!1),a=u()(c,2),s=a[0],o=a[1];return Object(x.jsxs)(it,{children:[Object(x.jsxs)(ct,{children:[Object(x.jsxs)(at,{onPress:function(){return o(!s)},children:[Object(x.jsx)(ot,{children:t.name}),Object(x.jsx)(oe.default,{name:s?"chevron-up":"chevron-down",size:25})]}),Object(x.jsx)(st,{onPress:function(){j.delete("/api/packs/"+t.id).then((function(e){return e.data})).then((function(e){return n(i.filter((function(t){return t.id!==e.id})))})).catch((function(e){return p(e)}))},children:Object(x.jsx)(oe.default,{name:"trash",size:25,color:"red"})})]}),s?Object(x.jsx)(lt,{children:Object(x.jsx)(rt,{pack:t})}):null]})},dt=se.default.View(Ve||(Ve=ae()([""]))),ft=se.default.TextInput(Ae||(Ae=ae()(["\n  padding: 3%;\n  border: 1px solid black;\n  border-radius: 5px;\n  font-size: 18px;\n  width: 85%;\n"]))),jt=se.default.View(Ne||(Ne=ae()(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  width: 100%;\n"]))),bt=se.default.TouchableOpacity(Le||(Le=ae()(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 10%;\n  padding: 1%;\n  border: 1px solid black;\n  border-radius: 5px;\n"]))),pt=function(e){var t=e.list,n=e.setList,i=Object(r.useContext)(m).user,c=Object(r.useState)(!1),a=u()(c,2),s=a[0],o=a[1],l=Object(r.useState)(null),d=u()(l,2),f=d[0],b=d[1];return Object(x.jsxs)(dt,{children:[t&&t.map((function(e){return Object(x.jsx)(ut,{pack:e,setList:n,list:t},e.id)})),s?Object(x.jsxs)(jt,{children:[Object(x.jsx)(ft,{onChangeText:function(e){return b(e)}}),Object(x.jsx)(bt,{onPress:function(){null!==f.length?j.post("/api/packs",{name:f,user_id:i.id}).then((function(e){return e.data})).then((function(e){n(t.concat(e)),o(!1),b(null)})).catch((function(e){return p(e)})):o(!1)},children:Object(x.jsx)(le.default,{name:"check",size:30})})]}):Object(x.jsx)(fe,{text:"Ajouter un pack",action:function(){o(!0)}})]})},xt=se.default.View(Fe||(Fe=ae()(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n"]))),ht=se.default.TouchableOpacity(Ie||(Ie=ae()(["\n  width: 45%;\n  border: 1px solid black;\n  padding: 3%;\n  background: ",";\n  border-radius: 5px;\n"])),(function(e){return e.isActive?"#083D77":"#EFEFEF"})),Ot=se.default.Text(De||(De=ae()(["\n  font-size: 18px;\n  text-align: center;\n  font-weight: 500;\n  color: ",";\n"])),(function(e){return e.isActive?"#EFEFEF":"#1F1300"})),gt=function(e){var t=e.actionLeft,n=e.actionRight,i=e.textLeft,c=e.textRight,a=Object(r.useState)(!1),s=u()(a,2),o=s[0],l=s[1],d=Object(r.useState)(!1),f=u()(d,2),j=f[0],b=f[1];return Object(x.jsxs)(xt,{children:[Object(x.jsx)(ht,{onPress:function(){t(),l(!0),b(!1)},isActive:o,children:Object(x.jsx)(Ot,{isActive:o,children:i})}),Object(x.jsx)(ht,{onPress:function(){n(),b(!0),l(!1)},isActive:j,children:Object(x.jsx)(Ot,{isActive:j,children:c})})]})};function mt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mt(Object(n),!0).forEach((function(t){T()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var yt,vt,Tt,kt,Ct,St,Pt,Et,zt,Vt,At,Nt,Lt=se.default.View(Re||(Re=ae()(["\n  border: 1px solid #1f1300;\n  padding: 5% 5%;\n  background: #fdfdff;\n  width: 100%;\n  border-radius: 5px;\n  margin-bottom: ",";\n"])),(function(e){return e.isFocus?"60%":"0"})),Ft=se.default.View(_e||(_e=ae()(["\n  display: flex;\n  align-items: center;\n  margin-top: 10%;\n"]))),It=se.default.View(Be||(Be=ae()(["\n  width: 100%;\n  padding: 3%;\n"]))),Dt=se.default.TextInput(Me||(Me=ae()(["\n  border-bottom-width: 1px;\n  border-bottom-color: #1f1300;\n  font-size: 18px;\n  padding: 2%;\n  margin-top: 1%;\n"]))),Rt=se.default.Text(Ue||(Ue=ae()(["\n  font-size: 18px;\n"]))),_t=se.default.Text(He||(He=ae()(["\n  margin-right: 10%;\n  font-size: 18px;\n"]))),Bt=se.default.TouchableOpacity(Je||(Je=ae()(["\n  display: flex;\n  flex-direction: row;\n  align-self: center;\n  align-items: center;\n"]))),Mt=se.default.View(We||(We=ae()([""]))),Ut=function(e){var t=e.formStyle,n=e.customer,i=e.setCustomer,c=Object(r.useState)({}),a=u()(c,2),s=a[0],o=a[1],l=Object(r.useState)(!1),d=u()(l,2),f=d[0],j=d[1],b=Object(r.useState)(!0),p=u()(b,2),h=p[0],O=p[1];return Object(r.useEffect)((function(){o("ESTIMATE"===t?{firstname:"Pr\xe9nom de l'interlocuteur :",lastname:"Nom de l'interlocuteur :",mail:"Mail de l'interlocuteur :",phone:"Num\xe9ro de t\xe9l\xe9phone : ",company:"Nom de l'entreprise :"}:{firstname:"Pr\xe9nom de l'interlocuteur :",lastname:"Nom de l'interlocuteur :",phone:"Num\xe9ro de t\xe9l\xe9phone : ",mail:"Mail de l'interlocuteur :",company:"Nom de l'entreprise :"})}),[t]),Object(x.jsxs)(Lt,{isFocus:f,children:[Object(x.jsxs)(Bt,{onPress:function(){return O(!h)},children:[Object(x.jsx)(_t,{children:"Infos g\xe9n\xe9rales du devis"}),Object(x.jsx)(Mt,{children:Object(x.jsx)(oe.default,{name:h?"eye-off":"eye",size:20})})]}),h?Object(x.jsx)(Ft,{children:Object.entries(s).map((function(e){var t=u()(e,2),r=t[0],c=t[1];return Object(x.jsxs)(It,{children:[Object(x.jsx)(Rt,{children:c}),Object(x.jsx)(Dt,{onFocus:function(){return j(!0)},onEndEditing:function(){return j(!1)},value:n[r],onChangeText:function(e){return i(wt(wt({},n),{},T()({},r,e)))}})]},r)}))}):null]})},Ht=se.default.TouchableOpacity(yt||(yt=ae()(["\n  padding: 10px 20px;\n  border: ",";\n  display: flex;\n  align-items: center;\n  border-radius: 5px;\n"])),(function(e){return e.isActif?"2px solid rgba(8, 61, 119, 1)":"2px solid rgba(31, 19, 0, 0.3)"})),Jt=se.default.Text(vt||(vt=ae()(["\n  font-size: 20px;\n  font-weight: bold;\n  color: ",";\n"])),(function(e){return e.isActif?"2px solid rgba(8, 61, 119, 1)":"2px solid rgba(31, 19, 0, 0.3)"})),Wt=function(e){var t=e.text,n=e.isActif,r=e.action;return Object(x.jsx)(Ht,{isActif:n,activeOpacity:n?.2:1,onPress:n?r:null,children:Object(x.jsx)(Jt,{isActif:n,children:t})})};function Kt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kt(Object(n),!0).forEach((function(t){T()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Gt,Qt,Xt,Yt,Zt,$t,en,tn,nn,rn,cn,an,sn,on,ln,un,dn=se.default.ScrollView(Tt||(Tt=ae()(["\n  background: #eeeff5;\n  height: 100%;\n"]))),fn=se.default.View(kt||(kt=ae()(["\n  display: flex;\n  align-items: center;\n"]))),jn=se.default.View(Ct||(Ct=ae()(["\n  width: 90%;\n  margin-top: 10%;\n"]))),bn=se.default.View(St||(St=ae()(["\n  margin-top: 5%;\n  width: 90%;\n"]))),pn=se.default.View(Pt||(Pt=ae()(["\n  width: 90%;\n  margin-top: 5%;\n"]))),xn=se.default.Text(Et||(Et=ae()(["\n  font-size: 18px;\n  font-weight: bold;\n  margin-bottom: 3%;\n  text-align: center;\n"]))),hn=se.default.View(zt||(zt=ae()(["\n  width: 90%;\n  margin: 5% 0 15% 0;\n  align-self: center;\n"]))),On=se.default.View(Vt||(Vt=ae()(["\n  display: flex;\n  flex-direction: row;\n  width: 80%;\n  align-self: center;\n  justify-content: space-between;\n  margin-bottom: 10%;\n"]))),gn=se.default.View(At||(At=ae()(["\n  width: 90%;\n"]))),mn=se.default.TextInput(Nt||(Nt=ae()(["\n  margin: 2% 0;\n  font-size: 15px;\n  border: 1px solid rgba(31, 19, 0, 0.3);\n  background: #fdfdff;\n  padding: 2% 5%;\n  font-weight: 600;\n  border-radius: 5px;\n"]))),wn=function(e){var t=e.route,n=Object(r.useContext)(m).user,i=Object(r.useState)(null),a=u()(i,2),s=a[0],o=a[1],l=Object(r.useState)(!1),d=u()(l,2),f=d[0],b=d[1],h=Object(r.useState)([]),O=u()(h,2),g=O[0],w=O[1],y=Object(r.useState)({type:t.params?t.params.file.type:null,user_id:n.id,reduction:t.params?t.params.file.reduction:null,pack:{connect:[]}}),v=u()(y,2),T=v[0],k=v[1],C=Object(r.useState)({firstname:null,lastname:null,company:null,phone:null,mail:null}),S=u()(C,2),P=S[0],E=S[1],z=Object(r.useState)(!1),V=u()(z,2),A=V[0],N=V[1],L=Object(r.useState)(""),F=u()(L,2),I=F[0],D=F[1];Object(r.useEffect)((function(){if(t.params){var e=t.params.file;k(e),w(e.pack),o("estimate"===e.type?"ESTIMATE":"BILL"),E(e.customer),N(!0),D("UPDATE")}else D("CREATE")}),[t.params]),Object(r.useEffect)((function(){var e=g.map((function(e){return'{"id" : '+e.id+"}"})).map((function(e){return JSON.parse(e)}));k(qt(qt({},T),{},{pack:{connect:e}}))}),[g]),console.log(T),Object(r.useEffect)((function(){("CREATE"===I&&null!==P.firstname&&null!==P.lastname&&null!==P.company&&null!==P.phone&&null!==P.mail&&g.length>0||"UPDATE"===I)&&b(!0)}),[I,P.company,P.firstname,P.lastname,P.mail,P.phone,g.length]);return Object(x.jsxs)(dn,{children:[Object(x.jsxs)(fn,{children:[Object(x.jsx)(bn,{children:Object(x.jsx)(gt,{textLeft:"Devis",textRight:"Facture",actionLeft:function(){o("ESTIMATE"),k(qt(qt({},T),{},{type:"estimate"}))},actionRight:function(){o("BILL"),k(qt(qt({},T),{},{type:"bill"}))}})}),Object(x.jsx)(jn,{children:s&&Object(x.jsx)(Ut,{formStyle:s,customer:P,setCustomer:E})}),Object(x.jsxs)(pn,{children:[Object(x.jsx)(xn,{children:"Liste des pack"}),Object(x.jsx)(pt,{list:g,setList:w})]}),Object(x.jsx)(gn,{children:Object(x.jsx)(mn,{placeholder:"Ajouter une r\xe9duction",onChangeText:function(e){return k(qt(qt({},T),{},{reduction:e}))},value:0!==T.reduction?T.reduction:null})})]}),Object(x.jsx)(hn,{children:Object(x.jsx)(Wt,{text:"CREATE"===I?"Cr\xe9er":"Modifier",isActif:f,action:"CREATE"===I?function(){var e;return c.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c.a.awrap(j.post("/api/customers",P));case 3:if(!(e=t.sent).data){t.next=11;break}return t.next=7,c.a.awrap(j.post("/api/files",qt(qt({},T),{},{customer_id:e.data.id})));case 7:t.sent||p("Une erreur s'est produite lors de la cr\xe9ation du fichier"),t.next=12;break;case 11:p("Une erreur s'est produite ");case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),p(t.t0);case 17:N(!0);case 18:case"end":return t.stop()}}),null,null,[[0,14]],Promise)}:function(){return c.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:try{j.put("api/files/"+t.params.file.id,qt(qt({},T),{},{reduction:parseFloat(T.reduction)}))?N(!0):p("Une erreur est survenue, merci de r\xe9essayer")}catch(n){p(n)}case 1:case"end":return e.stop()}}),null,null,null,Promise)}})}),A&&!T.price?Object(x.jsxs)(On,{children:[Object(x.jsx)(Wt,{text:"Partager",isActif:!0}),Object(x.jsx)(Wt,{text:"Voir",isActif:!0})]}):null]})},yn=n(75),vn=n(18),Tn=n(220),kn=se.default.View(Gt||(Gt=ae()(["\n  box-shadow: 0px 0px 2px rgba(255, 255, 255, 1);\n"]))),Cn=se.default.View(Qt||(Qt=ae()(["\n  display: flex;\n  flex-direction: row;\n  width: 100%;\n  justify-content: space-between;\n  align-items: center;\n  padding: 5% 3%;\n  background: #f092ff;\n"]))),Sn=se.default.TouchableOpacity(Xt||(Xt=ae()(["\n  width: 50%;\n  display: flex;\n  align-items: center;\n  flex-direction: row;\n  justify-content: space-between;\n"]))),Pn=se.default.View(Yt||(Yt=ae()([""]))),En=se.default.Text(Zt||(Zt=ae()(["\n  font-size: 18px;\n  font-weight: 400;\n"]))),zn=se.default.View($t||($t=ae()(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  border-bottom-width: 1px;\n  padding: 10px 0;\n  border-bottom-color: rgba(31, 19, 0, 0.3);\n"]))),Vn=se.default.Text(en||(en=ae()(["\n  font-size: 18px;\n  font-weight: 600;\n"]))),An=se.default.TouchableOpacity(tn||(tn=ae()(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]))),Nn=se.default.View(nn||(nn=ae()(["\n  background: #fdfdff;\n  padding: 5% 3%;\n  border-bottom-width: 1px;\n  border-bottom-color: rgba(31, 19, 0, 0.3);\n"]))),Ln=se.default.View(rn||(rn=ae()(["\n  display: flex;\n  margin-top: 2%;\n  flex-direction: row;\n  justify-content: space-between;\n"]))),Fn=se.default.TouchableOpacity(cn||(cn=ae()(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 30%;\n  border: 1px solid #083d77;\n  padding: 3%;\n  border-radius: 3px;\n"]))),In=se.default.Text(an||(an=ae()(["\n  font-size: 16px;\n  font-weight: 600;\n  color: #083d77;\n"]))),Dn=function(e){var t=e.file,n=e.estimateList,i=e.setEstimateList,a=Object(vn.useNavigation)(),s=t.customer,o=Object(r.useState)(!1),l=u()(o,2),d=l[0],f=l[1];return Object(x.jsxs)(kn,{children:[Object(x.jsxs)(Cn,{children:[Object(x.jsxs)(Sn,{onPress:function(){return f(!d)},children:[Object(x.jsxs)(En,{children:[s.company," "]}),Object(x.jsx)(Pn,{children:d?Object(x.jsx)(le.default,{name:"down",size:20}):Object(x.jsx)(le.default,{name:"right",size:20})})]}),Object(x.jsx)(An,{onPress:function(){j.delete("/api/files/"+t.id).then((function(e){return e.data})).then((function(e){return i(n.filter((function(t){return t.id!==e.id})))})).catch((function(e){return console.error(e)}))},children:Object(x.jsx)(le.default,{name:"delete",size:20})})]}),d&&Object(x.jsxs)(Nn,{children:[Object(x.jsxs)(zn,{children:[Object(x.jsx)(Vn,{children:"Type :"}),Object(x.jsx)(En,{children:"estimate"===t.type?"Devis":"Facture"})]}),Object(x.jsxs)(zn,{children:[Object(x.jsx)(Vn,{children:"Prix total :"}),Object(x.jsxs)(En,{children:[t.price_ht," \u20ac / HT"]}),Object(x.jsx)(Vn,{children:"Nom du client :"}),Object(x.jsx)(En,{children:s.firstname+" "+s.lastname})]}),Object(x.jsxs)(zn,{children:[Object(x.jsx)(Vn,{children:"Mail du client :"}),Object(x.jsx)(En,{children:s.mail})]}),Object(x.jsxs)(zn,{children:[Object(x.jsx)(Vn,{children:"Num\xe9ro du client :"}),Object(x.jsx)(En,{children:s.phone})]}),Object(x.jsxs)(Ln,{children:[Object(x.jsx)(Fn,{onPress:function(){return a.navigate("Cr\xe9ation de devis",{file:t})},children:Object(x.jsx)(In,{children:"Modifier"})}),Object(x.jsx)(Fn,{onPress:function(){return c.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.awrap(j.post("/upload-pdf",t));case 2:return e.next=4,c.a.awrap(Tn.openBrowserAsync("http://172.20.10.2:5001/test.pdf"));case 4:case"end":return e.stop()}}),null,null,null,Promise)},children:Object(x.jsx)(In,{children:"Voir"})}),Object(x.jsx)(Fn,{children:Object(x.jsx)(In,{children:"Envoyer"})})]})]})]})},Rn=se.default.View(sn||(sn=ae()([""]))),_n=function(e){var t=e.estimateList,n=e.setEstimateList;return Object(x.jsx)(Rn,{children:t.length>0?t.map((function(e,r){return Object(x.jsx)(Dn,{file:e,setEstimateList:n,estimateList:t},r)})):null})},Bn=n(37);se.default;var Mn,Un,Hn,Jn,Wn,Kn,qn,Gn,Qn,Xn,Yn,Zn,$n,er,tr,nr,rr,ir,cr,ar,sr,or,lr,ur,dr,fr,jr,br,pr,xr,hr,Or,gr,mr,wr,yr,vr,Tr,kr,Cr,Sr,Pr,Er=se.default.View(on||(on=ae()(["\n  background: #fdfdff;\n  border: 1px solid black;\n  border-radius: 30px;\n  padding: 10px 20px;\n  display: flex;\n  justify-content: space-between;\n  flex-direction: row;\n"]))),zr=se.default.TextInput(ln||(ln=ae()(["\n  font-size: 18px;\n  width: 90%;\n"]))),Vr=se.default.View(un||(un=ae()(["\n  width: 10%;\n  display: flex;\n  align-items: flex-end;\n"]))),Ar=function(e){var t=e.value,n=e.setValue;return Object(x.jsxs)(Er,{children:[Object(x.jsx)(zr,{placeholder:"Rechercher",value:t,onChangeText:n}),Object(x.jsx)(Vr,{children:Object(x.jsx)(Bn.default,{name:"search",size:30,color:"#8c8787"})})]})},Nr=se.default.SafeAreaView(Mn||(Mn=ae()([""]))),Lr=se.default.ScrollView(Un||(Un=ae()([""]))),Fr=se.default.Text(Hn||(Hn=ae()(["\n  font-size: 18px;\n"]))),Ir=se.default.Text(Jn||(Jn=ae()(["\n  font-size: 20px;\n  font-weight: 500;\n  color: #083d77;\n"]))),Dr=se.default.View(Wn||(Wn=ae()(["\n  display: flex;\n  align-items: center;\n"]))),Rr=se.default.TouchableOpacity(Kn||(Kn=ae()(["\n  margin-top: 3%;\n"]))),_r=se.default.View(qn||(qn=ae()(["\n  display: flex;\n  align-items: center;\n  margin-top: 10%;\n"]))),Br=se.default.View(Gn||(Gn=ae()(["\n  width: 90%;\n"]))),Mr=se.default.View(Qn||(Qn=ae()(["\n  width: 100%;\n  ","\n  margin: 5% 0;\n  display: flex;\n  align-items: center;\n"])),""),Ur=function(){var e=Object(vn.useNavigation)(),t=Object(r.useState)([]),n=u()(t,2),i=n[0],a=n[1],s=Object(r.useState)(!1),o=u()(s,2),l=o[0],d=o[1],f=Object(r.useState)(""),b=u()(f,2),p=b[0],h=b[1],O=Object(r.useCallback)((function(){return c.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.awrap(j.get("/api/files").then((function(e){return e.data})).then((function(e){a(""!==p?e.filter((function(e){return e.customer.company.includes(p.toLowerCase())||e.customer.company.includes(p.toUpperCase())})):e)})));case 2:case"end":return e.stop()}}),null,null,null,Promise)}),[p]);Object(r.useEffect)((function(){O()}),[O]);var g=Object(r.useCallback)((function(){d(!0),O(),d(!1)}),[]);return Object(x.jsx)(Nr,{children:Object(x.jsxs)(Lr,{refreshControl:Object(x.jsx)(yn.default,{refreshing:l,onRefresh:g}),children:[Object(x.jsx)(Mr,{children:Object(x.jsx)(Br,{children:Object(x.jsx)(Ar,{value:p,setValue:h})})}),i?Object(x.jsx)(_n,{estimateList:i,setEstimateList:a}):Object(x.jsxs)(Dr,{children:[Object(x.jsx)(_r,{children:Object(x.jsx)(Fr,{children:"Il n'y a pas encore de devis effectu\xe9s"})}),Object(x.jsx)(Rr,{onPress:function(){return e.navigate("Cr\xe9ation de devis")},children:Object(x.jsx)(Ir,{children:"Faire un devis"})})]})]})})},Hr=n(79),Jr=se.default.View(Xn||(Xn=ae()(["\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-between;\n  padding: 20px 10px;\n  border-bottom-width: 1px;\n"]))),Wr=se.default.View(Yn||(Yn=ae()(["\n  width: 20%;\n"]))),Kr=se.default.Text(Zn||(Zn=ae()(["\n  align-self: flex-start;\n  font-weight: 600;\n"]))),qr=se.default.Text($n||($n=ae()(["\n  color: #ff9b42;\n  font-weight: 600;\n"]))),Gr=se.default.Text(er||(er=ae()(["\n  align-self: flex-start;\n  color: #8c8787;\n"]))),Qr=se.default.View(tr||(tr=ae()(["\n  width: 70%;\n  display: flex;\n"]))),Xr=se.default.TouchableOpacity(nr||(nr=ae()(["\n  width: 30%;\n"]))),Yr=function(e){var t=e.user,n=e.iconName,r=Object(vn.useNavigation)();return Object(x.jsxs)(Jr,{children:[Object(x.jsx)(Wr,{children:Object(x.jsx)(Bn.default,{name:n,size:50})}),Object(x.jsxs)(Qr,{children:[Object(x.jsxs)(Kr,{children:[t.firstName," ",t.lastName]}),Object(x.jsx)(Gr,{children:t.Role.Name}),Object(x.jsx)(qr,{children:0===t._count.Estimate?"Pas encore de devis effectu\xe9":t._count.Estimate+" devis effectu\xe9s"})]}),Object(x.jsx)(Xr,{onPress:function(){return r.push("Utilisateur admin view",{user:t})},children:Object(x.jsx)(Bn.default,{name:"ellipsis-h",size:30})})]})},Zr=se.default.View(rr||(rr=ae()(["\n  border-top-width: 1px;\n"]))),$r=se.default.Text(ir||(ir=ae()([""]))),ei=function(e){var t=e.elems;return void 0!==t[0]?Object(x.jsx)(Zr,{children:Object(x.jsx)(Hr.default,{data:t,renderItem:function(e){var t=e.item;return Object(x.jsx)(Yr,{user:t,iconName:"user"})},keyExtractor:function(e){return e.id},horizontal:"false"})}):Object(x.jsx)($r,{children:"Il n'y a pas de donn\xe9es \xe0 afficher"})},ti=se.default.SafeAreaView(cr||(cr=ae()(["\n  background: #eeeff5;\n  height: 100%;\n  display: flex;\n  width: 100%;\n  align-items: center;\n"]))),ni=se.default.View(ar||(ar=ae()(["\n  align-self: center;\n  width: 70%;\n  margin-top: 5%;\n"]))),ri=se.default.View(sr||(sr=ae()(["\n  height: 70%;\n  width: 100%;\n  border-bottom-width: 1px;\n"]))),ii=se.default.View(or||(or=ae()(["\n  width: 80%;\n  margin: 5% 0;\n"]))),ci=function(){var e=Object(vn.useNavigation)(),t=Object(r.useState)([]),n=u()(t,2),i=n[0],c=n[1],a=Object(r.useState)(""),s=u()(a,2),o=s[0],l=s[1];return Object(r.useEffect)((function(){j.get("/api/users").then((function(e){return e.data})).then((function(e){c(""!==o?e.filter((function(e){return e.firstName.includes(o.toLowerCase())||e.firstName.includes(o.toUpperCase())||e.lastName.includes(o.toLowerCase())||e.lastName.includes(o.toUpperCase())})):e)})).catch((function(e){return p(e)}))}),[o]),Object(x.jsxs)(ti,{children:[Object(x.jsx)(ii,{children:Object(x.jsx)(Ar,{value:o,setValue:l})}),Object(x.jsxs)(ri,{children:[Object(x.jsx)(ei,{elems:i}),Object(x.jsx)(ni,{children:Object(x.jsx)(fe,{text:"Ajouter un utilisateur",action:function(){return e.navigate("Cr\xe9ation utilisateur")}})})]})]})},ai=se.default.View(lr||(lr=ae()(["\n  display: flex;\n  align-items: center;\n  margin-top: 5%;\n  background: #eeeff5;\n"]))),si=se.default.View(ur||(ur=ae()(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border: 3px solid #1f1300;\n  border-radius: 100%;\n  width: 150px;\n  height: 150px;\n  background-color: #fdfdff;\n"]))),oi=se.default.View(dr||(dr=ae()(["\n  margin-top: 2%;\n  display: flex;\n  align-items: center;\n"]))),li=se.default.Text(fr||(fr=ae()(["\n  font-size: 20px;\n  font-weight: 600;\n"]))),ui=function(e){var t,n=e.user,r=n.mail,i=n.firstName,c=n.lastName,a=n.role_id,s=i+" "+c;return a&&1===a&&(t="Admin"),Object(x.jsxs)(ai,{children:[Object(x.jsx)(si,{children:Object(x.jsx)(Bn.default,{name:"user",size:120,color:"#1f1300"})}),Object(x.jsxs)(oi,{children:[Object(x.jsx)(li,{children:r}),Object(x.jsx)(G.default,{children:s.toUpperCase()}),Object(x.jsx)(G.default,{children:t})]})]})},di=se.default.TouchableOpacity(jr||(jr=ae()(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n  padding: 20px 0;\n"]))),fi=se.default.Text(br||(br=ae()(["\n  font-size: 20px;\n"]))),ji=se.default.View(pr||(pr=ae()(["\n  width: 90%;\n  border-bottom-width: 2px;\n  border-bottom-color: lightgrey;\n"]))),bi=function(e){var t=e.title,n=e.link,r=(e.autorisedRole,Object(vn.useNavigation)());return Object(x.jsx)(ji,{children:Object(x.jsxs)(di,{onPress:function(){return r.navigate(n)},children:[Object(x.jsx)(fi,{children:t}),Object(x.jsx)(Bn.default,{name:"chevron-right",size:25,color:"#A8A39A"})]})})},pi=se.default.View(xr||(xr=ae()(["\n  padding: 5% 0 5% 5%;\n  display: flex;\n  align-items: center;\n  border: 1px solid black;\n  width: 90%;\n  height: 50%;\n  align-self: center;\n  border-radius: 10px;\n  background: #fdfdff;\n  margin-top: 5%;\n"]))),xi=function(e){var t=e.parameters;return Object(x.jsx)(pi,{children:t.length>0?t.map((function(e,t){return Object(x.jsx)(bi,{title:e.title,link:e.link,autorisedRole:e.autorisedRole},t)})):null})},hi=se.default.TouchableOpacity(hr||(hr=ae()(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  flex-direction: row;\n  border: 1px solid #ff4d42;\n  padding: 20%;\n  background: #fdfdff;\n  border-radius: 5px;\n"]))),Oi=se.default.Text(Or||(Or=ae()(["\n  font-size: 20px;\n  font-weight: 500;\n  color: #ff4d42;\n"]))),gi=function(e){var t=e.text,n=e.action;e.isActif;return Object(x.jsxs)(hi,{onPress:n,children:[t&&Object(x.jsx)(Oi,{children:t}),Object(x.jsx)(Bn.default,{name:"trash",size:25,color:"#ff4d42"})]})},mi=[{id:1,title:"Modifier le mot de passe",link:"Changement du mot de passe"},{id:2,title:"Modifier l'adresse mail",link:"Changement du mail"}],wi=se.default.SafeAreaView(gr||(gr=ae()(["\n  background: #eeeff5;\n  height: 100%;\n  display: flex;\n  align-items: center;\n"]))),yi=se.default.View(mr||(mr=ae()(["\n  width: 50%;\n  margin-top: 10%;\n"]))),vi=function(e){var t=e.route,n=(Object(vn.useNavigation)(),t.params.user);return Object(x.jsxs)(wi,{children:[Object(x.jsx)(ui,{user:n}),Object(x.jsx)(xi,{parameters:mi}),Object(x.jsx)(yi,{children:Object(x.jsx)(gi,{text:"Supprimer",action:function(){b.default.alert("Suppression d'un utilisateur","Vous \xeates sur le point de supprimer un utilisateur, voulez-vous continuer ?",[{text:"Annuler",onPress:function(){return b.default.alert("L'utilisateur n'a pas \xe9t\xe9 supprim\xe9")},style:"cancel"},{text:"Continuer"}])}})})]})},Ti=se.default.TouchableOpacity(wr||(wr=ae()(["\n  background: ",";\n  width: 100%;\n  height: 100%;\n  padding: 15px 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-shadow: 4px 5px 5px rgba(31, 19, 0, 0.5);\n"])),(function(e){return e.isClickable?e.style.colorActive:e.style.colorInactive})),ki=se.default.Text(yr||(yr=ae()(["\n  font-size: 20px;\n  font-weight: 600;\n  color: ",";\n"])),(function(e){return e.isClickable?"#EFEFEF":"#1F1300"})),Ci=function(e){var t=e.text,n=e.action,r=e.isClickable,i=e.style;return Object(x.jsx)(Ti,{isClickable:r,onPress:r?n:null,activeOpacity:r?.2:1,style:i,children:Object(x.jsx)(ki,{isClickable:r,children:t})})};function Si(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Si(Object(n),!0).forEach((function(t){T()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Si(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ei,zi,Vi,Ai,Ni,Li,Fi={button:{colorActive:"#083D77",colorInactive:"#EFEFEF"}},Ii=se.default.View(vr||(vr=ae()(["\n  height: 100%;\n  background: #eeeff5;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),Di=se.default.View(Tr||(Tr=ae()(["\n  width: 70%;\n  margin-bottom: 6%;\n"]))),Ri=se.default.TextInput(kr||(kr=ae()(["\n  font-size: 20px;\n  padding: 10px;\n  background: #fdfdff;\n  border: 2px solid black;\n  margin-top: 10px;\n"]))),_i=se.default.Text(Cr||(Cr=ae()(["\n  font-size: 18px;\n  font-weight: 600;\n"]))),Bi=se.default.Text(Sr||(Sr=ae()(["\n  font-size: 25px;\n  font-weight: 700;\n  margin-bottom: 20%;\n  width: 60%;\n  text-align: center;\n"]))),Mi=se.default.View(Pr||(Pr=ae()(["\n  width: 30%;\n  height: 8%;\n"]))),Ui=function(){var e=Object(r.useState)({value:"",isCorrect:!0}),t=u()(e,2),n=t[0],i=t[1],c=Object(r.useState)(!1),a=u()(c,2),s=a[0],o=a[1],l=Object(r.useState)(""),d=u()(l,2),f=d[0],j=d[1],p=Object(r.useState)(""),h=u()(p,2),O=h[0],g=h[1],m=Object(r.useState)(!1),w=u()(m,2),y=w[0],v=w[1],T=y?300:0;Object(r.useEffect)((function(){s?console.log("password is input"):console.log("no password input")}),[s]);var k=Object(r.useState)(!1),C=u()(k,2),S=C[0],P=C[1];return Object(x.jsxs)(Ii,{children:[Object(x.jsx)(Bi,{children:"Changement d'adresse mail"}),Object(x.jsxs)(Di,{children:[Object(x.jsx)(_i,{children:"Rentrez votre adresse mail actuelle :"}),Object(x.jsx)(Ri,{value:n.value,keyboardType:"email-address",onChangeText:function(e){return i(Pi(Pi({},n),{},{value:e}))},clearButtonMode:"while-editing",onEndEditing:function(){o(!0),!n.isCorrect&&b.default.alert("Mauvaise adresse mail","L'adresse mail rentr\xe9e n'est pas la bonne, merci d'essayer \xe0 nouveau",[{text:"ok",onPress:function(){return i(Pi(Pi({},n),{},{value:""}))},style:"destructive"}])}})]}),Object(x.jsxs)(Di,{children:[Object(x.jsx)(_i,{children:"Rentrez votre nouvelle adresse mail :"}),Object(x.jsx)(Ri,{value:f,keyboardType:"email-address",onChangeText:j,editable:n.isCorrect,clearButtonMode:"while-editing"})]}),Object(x.jsxs)(Di,{children:[Object(x.jsx)(_i,{children:"Confirmez votre nouvelle adresse mail :"}),Object(x.jsx)(Ri,{value:O,keyboardType:"email-address",onChangeText:g,style:{marginBottom:T},onFocus:function(){return v(!0)},onEndEditing:function(){v(!1),f===O&&P(!0)},editable:n.isCorrect,clearButtonMode:"while-editing"})]}),Object(x.jsx)(Mi,{children:Object(x.jsx)(Ci,{text:"Changer",isClickable:!0,style:Fi.button})}),f&&O&&!S?Object(x.jsx)(G.default,{children:"Les adresses ne concordent pas"}):null]})};function Hi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ji(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hi(Object(n),!0).forEach((function(t){T()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Wi,Ki,qi,Gi,Qi,Xi={button:{colorActive:"#083D77",colorInactive:"#EFEFEF"}},Yi=se.default.View(Ei||(Ei=ae()(["\n  height: 100%;\n  background: #eeeff5;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),Zi=se.default.View(zi||(zi=ae()(["\n  width: 70%;\n  margin-bottom: 6%;\n"]))),$i=se.default.TextInput(Vi||(Vi=ae()(["\n  font-size: 20px;\n  padding: 10px;\n  background: #fdfdff;\n  border: 2px solid black;\n  margin-top: 10px;\n"]))),ec=se.default.Text(Ai||(Ai=ae()(["\n  font-size: 18px;\n  font-weight: 600;\n"]))),tc=se.default.Text(Ni||(Ni=ae()(["\n  font-size: 25px;\n  font-weight: 700;\n  margin-bottom: 20%;\n  width: 60%;\n  text-align: center;\n"]))),nc=se.default.View(Li||(Li=ae()(["\n  width: 30%;\n  height: 8%;\n"]))),rc=function(){var e=Object(r.useState)({value:"",isCorrect:!0}),t=u()(e,2),n=t[0],i=t[1],c=Object(r.useState)(!1),a=u()(c,2),s=a[0],o=a[1],l=Object(r.useState)(""),d=u()(l,2),f=d[0],j=d[1],p=Object(r.useState)(""),h=u()(p,2),O=h[0],g=h[1],m=Object(r.useState)(!1),w=u()(m,2),y=w[0],v=w[1],T=y?300:0;Object(r.useEffect)((function(){s?console.log("password is input"):console.log("no password input")}),[s]);var k=Object(r.useState)(!1),C=u()(k,2),S=C[0],P=C[1];return Object(x.jsxs)(Yi,{children:[Object(x.jsx)(tc,{children:"Changement de mot de passe"}),Object(x.jsxs)(Zi,{children:[Object(x.jsx)(ec,{children:"Rentrez votre mot de passe :"}),Object(x.jsx)($i,{value:n.value,onChangeText:function(e){return i(Ji(Ji({},n),{},{value:e}))},secureTextEntry:!0,clearButtonMode:"while-editing",onEndEditing:function(){o(!0),!n.isCorrect&&b.default.alert("Mauvais mot de passe","Le mot de passe rentr\xe9 n'est pas bon, merci de le saisir \xe0 nouveau",[{text:"ok",onPress:function(){return i(Ji(Ji({},n),{},{value:""}))},style:"destructive"}])}})]}),Object(x.jsxs)(Zi,{children:[Object(x.jsx)(ec,{children:"Rentrez votre nouveau mot de passe :"}),Object(x.jsx)($i,{value:f,onChangeText:j,editable:n.isCorrect,clearButtonMode:"while-editing"})]}),Object(x.jsxs)(Zi,{children:[Object(x.jsx)(ec,{children:"Rentrez votre nouveau mot de passe :"}),Object(x.jsx)($i,{value:O,onChangeText:g,style:{marginBottom:T},onFocus:function(){return v(!0)},onEndEditing:function(){v(!1),f===O&&P(!0)},editable:n.isCorrect,clearButtonMode:"while-editing"})]}),Object(x.jsx)(nc,{children:Object(x.jsx)(Ci,{text:"Changer",isClickable:!0,style:Xi.button})}),f&&O&&!S?Object(x.jsx)(G.default,{children:"Les mots de passes ne concordent pas"}):null]})},ic=n(9),cc=n(90);function ac(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ac(Object(n),!0).forEach((function(t){T()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ac(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var oc,lc,uc,dc=se.default.View(Wi||(Wi=ae()(["\n  background: #fdfdff;\n  width: 100%;\n  height: 100%;\n  border: 1px solid #1f1300;\n  border-radius: 30px;\n  padding: 20px;\n"]))),fc=se.default.View(Ki||(Ki=ae()(["\n  border-bottom-width: 1px;\n  border-bottom-color: #8c8787;\n  height: 12%;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n"]))),jc=se.default.TextInput(qi||(qi=ae()(["\n  font-size: 18px;\n  height: 70%;\n  width: 100%;\n"]))),bc=se.default.Text(Gi||(Gi=ae()(["\n  font-size: 22px;\n  text-align: center;\n"]))),pc=se.default.View(Qi||(Qi=ae()(["\n  margin-top: 10%;\n  padding: 0 10%;\n"]))),xc=function(e){var t=e.newUser,n=e.setNewUser,r=t.lastName,i=t.firstName,c=t.mail,a=t.role_id;return Object(x.jsxs)(dc,{children:[Object(x.jsx)(fc,{children:Object(x.jsx)(jc,{clearButtonMode:"while-editing",autoCorrect:!1,placeholder:"Nom",autoCapitalize:"words",placeholderTextColor:"#1f1300",value:r,onChangeText:function(e){return n(sc(sc({},t),{},{lastName:e}))}})}),Object(x.jsx)(fc,{children:Object(x.jsx)(jc,{clearButtonMode:"while-editing",autoCorrect:!1,placeholder:"Pr\xe9nom",autoCapitalize:"words",placeholderTextColor:"#1f1300",value:i,onChangeText:function(e){return n(sc(sc({},t),{},{firstName:e}))}})}),Object(x.jsx)(fc,{children:Object(x.jsx)(jc,{clearButtonMode:"while-editing",autoCorrect:!1,placeholder:"Mail",keyboardType:"email-address",autoCapitalize:"none",placeholderTextColor:"#1f1300",value:c,onChangeText:function(e){return n(sc(sc({},t),{},{mail:e}))}})}),Object(x.jsxs)(pc,{children:[Object(x.jsx)(bc,{children:"Role de l'utilisateur"}),Object(x.jsxs)(cc.Picker,{numberOfLines:2,selectedValue:a,onValueChange:function(e,r){return n(sc(sc({},t),{},{role_id:e}))},children:[Object(x.jsx)(cc.Picker.Item,{label:"S\xe9lectionnez un role",value:null}),Object(x.jsx)(cc.Picker.Item,{label:"Admin",value:1}),Object(x.jsx)(cc.Picker.Item,{label:"Commercial",value:2}),Object(x.jsx)(cc.Picker.Item,{label:"consultant",value:3})]})]})]})};var hc,Oc,gc,mc,wc,yc,vc,Tc,kc,Cc,Sc,Pc,Ec=se.default.KeyboardAvoidingView(oc||(oc=ae()(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  background: #eeeff5;\n"]))),zc=se.default.View(lc||(lc=ae()(["\n  width: 80%;\n  height: 70%;\n"]))),Vc=se.default.View(uc||(uc=ae()(["\n  margin-top: 10%;\n  width: 50%;\n  height: 8%;\n"]))),Ac=function(){Object(vn.useNavigation)();var e=Object(r.useState)({mail:null,firstName:null,password:null,lastName:null,role_id:null}),t=u()(e,2),n=t[0],i=t[1],c=Object(r.useState)(!1),a=u()(c,2),s=a[0],o=a[1];Object(r.useEffect)((function(){null!==(n.firstName&&n.lastName&&n.mail&&n.role_id)?o(!0):o(!1)}),[n.firstName,n.lastName,n.mail,n.role_id]);return Object(x.jsxs)(Ec,{behavior:"ios"===ic.default.OS?"padding":"height",children:[Object(x.jsx)(zc,{children:Object(x.jsx)(xc,{newUser:n,setNewUser:i})}),Object(x.jsx)(Vc,{children:Object(x.jsx)(Ci,{text:"Cr\xe9er",isClickable:s})})]})},Nc=n(322),Lc=se.default.TouchableOpacity(hc||(hc=ae()(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  background: #fdfdff;\n  padding: 10px;\n  margin-bottom: 5%;\n  border: 1px solid rgba(8, 61, 119, 1);\n  border-radius: 10px;\n"]))),Fc=se.default.View(Oc||(Oc=ae()(["\n  width: 20%;\n  border: 1px solid rgba(8, 61, 119, 1);\n  padding: 2%;\n  display: flex;\n  align-items: center;\n  margin-bottom: 2%;\n  border-radius: 10px;\n"]))),Ic=se.default.Text(gc||(gc=ae()(["\n  font-size: 18px;\n  margin-left: 5%;\n"]))),Dc=function(e){var t=e.title,n=e.link,r=e.logo,i=Object(vn.useNavigation)();return Object(x.jsxs)(Lc,{activeOpacity:.6,onPress:function(){i.navigate(n)},children:[Object(x.jsx)(Fc,{children:Object(x.jsx)(Bn.default,{name:r,size:30,color:"rgba(8, 61, 119, 1)"})}),Object(x.jsx)(Ic,{children:t})]})},Rc=se.default.View(mc||(mc=ae()(["\n  width: 90%;\n  display: flex;\n"]))),_c=function(){return Object(x.jsxs)(Rc,{children:[Object(x.jsx)(Dc,{title:"Liste des devis",logo:"th-list",link:"Liste des devis"}),Object(x.jsx)(Dc,{title:"Faire un devis",logo:"plus",link:"Cr\xe9ation de devis"})]})},Bc=se.default.SafeAreaView(wc||(wc=ae()(["\n  backgroundcolor: '#EEEFF5';\n  display: flex;\n  flex-direction: column;\n"]))),Mc=se.default.View(yc||(yc=ae()(["\n  height: 60%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]))),Uc=se.default.Text(vc||(vc=ae()(["\n  align-self: flex-start;\n  font-size: 18px;\n  font-weight: 600;\n  margin: 2% 2%;\n"]))),Hc=function(){return Object(x.jsx)(Bc,{children:Object(x.jsxs)(Mc,{children:[Object(x.jsx)(Uc,{children:"Actions rapides"}),Object(x.jsx)(_c,{})]})})},Jc=se.default.SafeAreaView(Tc||(Tc=ae()(["\n  background: #eeeff5;\n  height: 100%;\n"]))),Wc=function(){var e=Object(r.useContext)(m).user;return Object(x.jsxs)(Jc,{children:[Object(x.jsx)(ui,{user:e}),Object(x.jsx)(xi,{parameters:mi})]})},Kc=Object(o.default)(),qc=function(){return Object(x.jsx)(Kc.Navigator,{screenOptions:{headerShown:!1},children:Object(x.jsx)(Kc.Screen,{name:"accountStack",component:Wc})})},Gc=n(222),Qc=se.default.TouchableOpacity(kc||(kc=ae()(["\n  background: #fdfdff;\n  padding: 15px;\n  border-radius: 30px;\n  margin-top: 5%;\n  width: 50%;\n  border: solid 1px black;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: center;\n"]))),Xc=se.default.Text(Cc||(Cc=ae()(["\n  font-size: 18px;\n  margin-right: 10px;\n  font-weight: 600;\n"]))),Yc=function(e){var t=e.onPress;return Object(x.jsxs)(Qc,{onPress:t,children:[Object(x.jsx)(Xc,{children:"D\xe9connexion"}),Object(x.jsx)(Gc.default,{name:"logout",size:20})]})},Zc=[{id:1,title:"Param\xe8tres des utilisateurs",link:"Liste des utilisateurs",autorisedRole:"admin"}],$c=se.default.SafeAreaView(Sc||(Sc=ae()(["\n  background: #eeeff5;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),ea=se.default.Text(Pc||(Pc=ae()(["\n  font-size: 25px;\n  font-weight: 600;\n  margin-bottom: 30%;\n"]))),ta=function(){var e=Object(r.useContext)(h);return Object(x.jsxs)($c,{children:[Object(x.jsx)(ea,{children:"Param\xe8tres de l'application"}),Object(x.jsx)(xi,{parameters:Zc}),Object(x.jsx)(Yc,{onPress:function(){return c.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:try{e.logout()}catch(n){p(n)}case 1:case"end":return t.stop()}}),null,null,null,Promise)}})]})},na=Object(o.default)(),ra=function(){return Object(x.jsx)(na.Navigator,{screenOptions:{headerShown:!1},children:Object(x.jsx)(na.Screen,{name:"parametersStack",component:ta})})},ia=Object(Nc.default)(),ca=function(){return Object(x.jsxs)(ia.Navigator,{screenOptions:function(e){var t=e.route;return{headerShown:!0,headerStyle:{backgroundColor:"#083D77"},headerTintColor:"#EFEFEF",tabBarIcon:function(e){var n=e.color,r=e.size;return Object(x.jsx)(Bn.default,{name:{Accueil:"home",Notifications:"bell",Compte:"user","Param\xe8tres":"gear"}[t.name],size:r,color:n})},tabBarActiveTintColor:"#EFEFEF",tabBarStyle:{backgroundColor:"#083D77",paddingTop:10},tabBarInactiveTintColor:"#486381"}},children:[Object(x.jsx)(ia.Screen,{name:"Accueil",component:Hc,options:{title:"App Devis",tabBarLabel:"Accueil"}}),Object(x.jsx)(ia.Screen,{name:"Compte",component:qc}),Object(x.jsx)(ia.Screen,{name:"Param\xe8tres",component:ra})]})},aa=Object(o.default)(),sa=function(){var e=Object(r.useContext)(h),t=Object(r.useContext)(m);t.user,t.setUser;return Object(r.useEffect)((function(){e.authState.authenticated||function(){var t,n;c.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,c.a.awrap(S.default.getItem("@storage_Key"));case 3:t=r.sent,n=JSON.parse(t),e.setAuthState({accessToken:n.accessToken||null,refreshToken:n.refreshToken||null,authenticated:null!==n.authenticated}),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(0),e.setAuthState({accessToken:null,refreshToken:null,authenticated:!1});case 11:case"end":return r.stop()}}),null,null,[[0,8]],Promise)}()}),[]),Object(x.jsxs)(s.default,{children:[Object(x.jsx)(a.default,{barStyle:"light-content"}),e.authState.authenticated?Object(x.jsxs)(aa.Navigator,{screenOptions:{headerShown:!1,headerStyle:{backgroundColor:"#083D77"},headerTintColor:"#EFEFEF"},children:[Object(x.jsx)(aa.Screen,{name:"App devis",component:ca}),Object(x.jsx)(aa.Screen,{name:"Cr\xe9ation de devis",component:wn,options:{headerShown:!0}}),Object(x.jsx)(aa.Screen,{name:"Liste des devis",component:Ur,options:{headerShown:!0}}),Object(x.jsx)(aa.Screen,{name:"Liste des utilisateurs",component:ci,options:{headerShown:!0}}),Object(x.jsx)(aa.Screen,{name:"Utilisateur admin view",component:vi,options:{headerShown:!0,title:""}}),Object(x.jsx)(aa.Screen,{name:"Changement du mail",component:Ui,options:{headerShown:!0,title:""}}),Object(x.jsx)(aa.Screen,{name:"Changement du mot de passe",component:rc,options:{headerShown:!0,title:""}}),Object(x.jsx)(aa.Screen,{name:"Cr\xe9ation utilisateur",component:Ac,options:{headerShown:!0,title:""}})]}):Object(x.jsx)(ie,{})]})};function oa(){return Object(x.jsx)(g,{children:Object(x.jsx)(K,{children:Object(x.jsx)(y,{children:Object(x.jsx)(sa,{})})})})}},227:function(e,t,n){e.exports=n(311)}},[[227,1,2]]]);
//# sourceMappingURL=app.4895db9c.chunk.js.map